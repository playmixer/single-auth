# Single Auth
 
 **Single Auth** — это централизованная система управления учётными данными и правами доступа пользователей к различным приложениям. Сервис позволяет:

* централизованно управлять учётными данными пользователей;
* создавать и настраивать приложения для интеграции с сервисом;
* назначать роли и права доступа для каждого приложения;
* (future)контролировать и анализировать активность пользователей.

**Основные функции сервиса:**

* регистрация и аутентификация пользователей;
* управление учётными данными пользователей;
* создание и настройка приложений для интеграции с сервисом;
* назначение ролей и прав доступа для каждого приложения;
* (future)мониторинг активности пользователей;
* (future)формирование отчётов о действиях пользователей.

**Преимущества использования сервиса:**

* упрощение процесса управления учётными данными и правами доступа;
* повышение безопасности за счёт централизованного контроля доступа;
* снижение нагрузки на ИТ-отдел по вопросам управления учётными данными;
* улучшение пользовательского опыта благодаря единому интерфейсу для авторизации.


### Поднять в docker [пример](/docker-compose.yml)

### Первый запуск 
- Создать администратора:
  - Подключить к контейнеру (зависит от ваших настроек)
    ```bash
    docker exec -it container-name-auth-server bash
    ```
  - Выполнить команду, укащать имя пользователя и задать пароль
    ```bash
    ./manager -new -u admin -p password
    ```
- Авторизоваться на https://example.com/auth/login
- Админ панель на https://exmaple.com/admin

### Описание глобальных переменных

- **LOG_LEVEL=debug**
  - **Тип:** строка
  - **Описание:** уровень логирования в системе. Возможные значения: `debug`, `info`, `warn`, `error`.

- **SERVER_BASEURL=https://exmaple.com**
  - **Тип:** строка
  - **Описание:** базовый URL сервера, используемый для обращения к API.

- **SERVER_ADDRESS=0.0.0.0:8080**
  - **Тип:** строка
  - **Описание:** адрес сервера, на котором работает приложение.

- **AUTH_SECRET_KEY=secret_key**
  - **Тип:** строка
  - **Описание:** секретный ключ, используемый для аутентификации и шифрования данных.

- **JWT_ACCESS_TOKEN_TTL=3600**
  - **Тип:** целое число (в секундах)
  - **Описание:** время жизни JWT-токена доступа в секундах.

- **JWT_REFRESH_TOKEN_TTL=2592000**
  - **Тип:** целое число (в секундах)
  - **Описание:** время жизни JWT-токена обновления в секундах.

- **COOKIE_DOMAIN=example.com**
  - **Тип:** строка
  - **Описание:** домен, для которого устанавливаются куки.

- **COOKIE_SECURE=0**
  - **Тип:** целое число (0 или 1)
  - **Описание:** флаг, указывающий, должны ли куки быть безопасными (HTTPS). Значение 1 означает, что куки должны быть безопасными.

- **COOKIE_LIFETIME=0**
  - **Тип:** целое число (в секундах)
  - **Описание:** время жизни куки в секундах. Значение 0 означает, что куки будут удалены по закрытию браузера.

- **DATABASE_ADDRESS=postgres://root:root@localhost:5432/singleauth**
  - **Тип:** строка
  - **Описание:** строка подключения к базе данных PostgreSQL.

- **DB_PGS_NAME=singleauth**
  - **Тип:** строка
  - **Описание:** имя базы данных PostgreSQL.

- **DB_PGS_USERNAME=root**
  - **Тип:** строка
  - **Описание:** имя пользователя для подключения к базе данных PostgreSQL.

- **DB_PGS_PASSWORD=root**
  - **Тип:** строка
  - **Описание:** пароль пользователя для подключения к базе данных PostgreSQL.

- **REDIS_ADDRESS=localhost:6379**
  - **Тип:** строка
  - **Описание:** адрес сервера Redis.

- **REDIS_PASSWORD=vbrcth**
  - **Тип:** строка
  - **Описание:** пароль для подключения к серверу Redis.

- **REDIS_DB=0**
  - **Тип:** целое число
  - **Описание:** номер базы данных Redis.

- **REDIS_PORT=6379**
  - **Тип:** целое число
  - **Описание:** порт сервера Redis